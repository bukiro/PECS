<div class="time-control" *ngIf="{desc: turnPassingBlocked$ | async } as turnPassingBlocked">
    <div
        class="time-control__turn-button time-control__turn-button--start"
        [ngClass]="{'disabled': (yourTurn.state === 5) || turnPassingBlocked.desc}"
        *ngIf="{ state: yourTurn$ | async } as yourTurn"
    >
        <app-button
            (clicked)="startTurn()"
            [disabled]="(yourTurn.state === 5) || turnPassingBlocked.desc ?? undefined"
            [ngbTooltip]="turnPassingBlocked.desc ?? 'Start your turn'"
            [disableTooltip]="yourTurn.state === 5"
            ghost
            compact
            noOutline
        >
            <i class="bi-play-fill"></i>
        </app-button>
    </div>

    <app-circular-menu
        class="time-control__pass-button"
        label="Pass time"
        [radius]="6"
        [options]="(timePassingOptions$ | async) ?? undefined"
        [ngbTooltip]="turnPassingBlocked.desc ?? 'Pass time'"
        [disabled]="turnPassingBlocked.desc ?? undefined"
        circle
        compact
    >
        <i class="bi-clock icon--pass-time"></i>
    </app-circular-menu>

    <div
        class="time-control__turn-button time-control__turn-button--end"
        [ngClass]="{'disabled': (yourTurn.state === 0) || turnPassingBlocked.desc}"
        *ngIf="{ state: yourTurn$ | async } as yourTurn"
    >
        <app-button
            (clicked)="startTurn()"
            [disabled]="(yourTurn.state === 0) || turnPassingBlocked.desc ?? undefined"
            [ngbTooltip]="turnPassingBlocked.desc ?? 'End your turn'"
            [disableTooltip]="yourTurn.state === 0"
            ghost
            compact
            noOutline
        >
            <i class="bi-stop-fill"></i>
        </app-button>
    </div>
</div>

<div
    class="turn-indicator"
    *ngIf="(yourTurn$ | async) === 0; else YourTurnTemplate"
>
    Not your turn
</div>

<ng-template #YourTurnTemplate>
    <div class="turn-indicator turn-indicator--active">Your turn</div>
</ng-template>
