<div
    *ngIf="{desc: turnPassingBlocked$ | async } as turnPassingBlocked"
    class="time-control"
>
    <div
        *ngIf="{ state: yourTurn$ | async } as yourTurn"
        class="time-control__turn-button time-control__turn-button--start"
        [ngClass]="{'disabled': (yourTurn.state === 5) || turnPassingBlocked.desc}"
        (click)="((yourTurn.state === 5) || turnPassingBlocked.desc) ? null : startTurn()"
        [ngbTooltip]="turnPassingBlocked.desc ?? 'Start your turn'"
        [disableTooltip]="yourTurn.state === 5"
    >
        <i class="bi-play-fill icon icon--turn-control"></i>
    </div>

    <app-circular-menu
        class="time-control__pass-button"
        label="Pass time"
        [radius]="6"
        [options]="(timePassingOptions$ | async) ?? undefined"
        [ngbTooltip]="turnPassingBlocked.desc ?? 'Pass time'"
        [disabled]="turnPassingBlocked.desc ?? undefined"
        circle
        compact
    >
        <i class="bi-clock icon icon--pass-time"></i>
    </app-circular-menu>

    <div
        *ngIf="{ state: yourTurn$ | async } as yourTurn"
        class="time-control__turn-button time-control__turn-button--end"
        [ngClass]="{'disabled': (yourTurn.state === 0) || turnPassingBlocked.desc}"
        (click)="((yourTurn.state === 0) || turnPassingBlocked.desc) ? null : endTurn()"
        [ngbTooltip]="turnPassingBlocked.desc ?? 'End your turn'"
        [disableTooltip]="yourTurn.state === 0"
    >
        <i class="bi-stop-fill icon icon--turn-control"></i>

    </div>
</div>

<div
    *ngIf="(yourTurn$ | async) === 0; else YourTurnTemplate"
    class="turn-indicator"
>
    Not your turn
</div>

<ng-template #YourTurnTemplate>
    <div class="turn-indicator turn-indicator--active">Your turn</div>
</ng-template>
