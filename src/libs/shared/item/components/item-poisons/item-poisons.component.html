<!-- Adding Poisons -->
@if (availablePoisons(); as availablePoisons) {
    @if (availablePoisons.length > 1 || item.poisonsApplied.length) {
        <div class="list-item">
            <div class="newrow">
                <strong
                    title="{{
                        item.poisonsApplied.length
                            ? 'Applying a new poison will waste the currently applied poison.'
                            : ''
                    }}"
                >
                    {{ item.poisonsApplied.length ? "Replace" : "Apply" }}
                    poison
                </strong>

                <select
                    aria-label="Select poison"
                    [(ngModel)]="newPoison"
                    (ngModelChange)="onSelectPoison()"
                >
                    @for (poisonSet of availablePoisons; track $index) {
                        <option [ngValue]="poisonSet">
                            {{
                                poisonSet.poison.amount !== 1
                                    ? poisonSet.poison.amount
                                    : ""
                            }}
                            {{ poisonSet.poison.effectiveName$() }}
                        </option>
                    }
                </select>
            </div>

            @if (item.poisonsApplied.length) {
                <div class="newrow">
                    <strong>Applied poison</strong>

                    @for (
                        poison of item.poisonsApplied;
                        track index;
                        let index = $index
                    ) {
                        <div class="newrow">
                            <span>{{ poison.effectiveName$() }}</span>

                            <button
                                type="button"
                                class="lower"
                                (click)="onRemovePoison(index)"
                            >
                                Spend/Remove
                            </button>
                        </div>
                    }
                </div>
            }
        </div>
    }
}
