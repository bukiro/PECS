<!-- Changing Aeon Stones -->
@for (index of availableSlots(); track $index) {
    <div class="newrow">
        @if ($first) {
            <strong>Aeon Stones</strong>
        } @else {
            <span>&nbsp;</span>
        }

        <select
            aria-label="Select aeon stone"
            [disabled]="!item.aeonStones[index - 1] && index > 0"
            [(ngModel)]="newAeonStone[index]"
            (change)="onSelectAeonStone(index)"
        >
            @for (
                stone of initialAeonStones(index);
                track $index
            ) {
                @if ($first) {
                    <option [ngValue]="stone"></option>
                } @else {
                    <optgroup label="Current stone">
                        <option [ngValue]="stone">
                            {{ stone.aeonStone.name }}
                        </option>
                    </optgroup>
                }
            }

            @for (inv of inventories(); track $index) {
                @if (availableAeonStones(inv); as availableAeonStones) {
                    @if (availableAeonStones.length) {
                        <optgroup
                            [label]="
                                itemStore
                                    ? 'Available stones'
                                    : (inventoryName$(inv) | async)
                            "
                        >
                            @for (stone of availableAeonStones; track $index) {
                                <option
                                    [ngValue]="stone"
                                    title="{{ hint(stone.aeonStone) }}"
                                >
                                    {{
                                        stone.aeonStone.amount > 1
                                            ? stone.aeonStone.amount
                                            : ""
                                    }}
                                    {{ stone.aeonStone.name
                                    }}{{
                                        aeonStoneCooldownText$(stone.aeonStone)
                                            | async
                                    }}
                                </option>
                            }
                        </optgroup>
                    }
                }
            }
        </select>
    </div>
}
