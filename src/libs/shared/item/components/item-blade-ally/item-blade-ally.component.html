<!-- Changing Blade Ally Status -->
<div class="list-item newrow">
    <div class="newrow">
        <strong>Rune Effect</strong>

        <select
            aria-label="Select blade ally rune effect"
            [(ngModel)]="newPropertyRune"
            (ngModelChange)="onSelectBladeAllyRune()"
        >
            @for (
                rune of initialPropertyRunes();
                track $index
            ) {
                @if ($first) {
                    <option
                        [ngValue]="rune"
                        [selected]="!item.propertyRunes[0]"
                    >
                        <!-- Blank option to deselect -->
                    </option>
                } @else {
                    <optgroup label="Current rune">
                        <option [ngValue]="rune">{{ rune.rune.name }}</option>
                    </optgroup>
                }
            }

            @if (
                availableWeaponPropertyRunes();
                as availableWeaponPropertyRunes
            ) {
                @if (availableWeaponPropertyRunes.length) {
                    <optgroup label="Available runes">
                        @for (
                            rune of availableWeaponPropertyRunes;
                            track $index
                        ) {
                            <option
                                [ngValue]="rune"
                                [disabled]="rune.disabled"
                            >
                                {{
                                    rune.rune.amount > 1
                                        ? rune.rune.amount + " "
                                        : ""
                                }}{{ rune.rune.name }}
                            </option>
                        }
                    </optgroup>
                }
            }
        </select>
    </div>
</div>
