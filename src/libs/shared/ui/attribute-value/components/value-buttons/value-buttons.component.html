@if (creature && customEffectsTarget) {
    <div
        [horizontal]="true"
        [ngbCollapse]="!showButtons"
    >
        <div class="button-tray">
            <ng-container [ngTemplateOutlet]="ButtonsTemplate" />

            <!-- Quick effects buttons -->
            <app-value-effects-buttons
                class="effects-buttons"
                [creature]="creature"
                [target]="customEffectsTarget"
                [title]="title"
            />
        </div>
    </div>

    <app-toggle-button
        tight
        class="show-controls-button"
        [ngbTooltip]="showButtons ? 'Hide controls' : 'Show controls'"
        [(ngModel)]="showButtons"
    >
        <i
            [class.bi-caret-left]='!showButtons'
            [class.bi-caret-right]='showButtons'
        ></i>
    </app-toggle-button>
} @else {
    <ng-container [ngTemplateOutlet]="ButtonsTemplate" />
}

<ng-template #ButtonsTemplate>
    <div class="buttons">
        <!-- Bonuses button -->
        <app-button
            *ngIf="showBonusesIcon && bonuses?.length"
            #BonusesPopover="ngbPopover"
            tight
            class="buttons__button buttons__button--bonuses"
            triggers="click"
            [ngbPopover]="BonusesTemplate"
        >
            <i
                class='bi-info'
                [ngbTooltip]="'Show calculation'"
                [disableTooltip]="BonusesPopover.isOpen()"
            ></i>
        </app-button>

        <!-- Notes button -->
        <app-toggle-button
            *ngIf="showNotesIcon"
            tight
            class="buttons__button buttons__button--notes"
            [ngbTooltip]="showNotes() ? 'Hide notes' : 'Show notes'"
            [(ngModel)]="showNotes"
        >
            <i
                class='bi-pencil-square'
            ></i>
        </app-toggle-button>
    </div>
</ng-template>

<ng-template #BonusesTemplate>
    <app-bonus-list
        *ngIf="bonuses?.length"
        [bonuses]="bonuses"
    />
</ng-template>
