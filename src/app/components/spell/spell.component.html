<div class="newrow lower" *ngIf="spell">
    <div class="newrow left-aligned">
        <cite class="trait" [ngClass]="{'trait-rare': trait == 'Rare', 'trait-uncommon': trait == 'Uncommon'}" *ngFor="let trait of spell.traits; trackBy:trackByIndex;"
            [ngbPopover]="get_Traits(trait)[0].desc">
            {{trait}}
        </cite>
        <cite class="extra-trait" *ngFor="let trait of spell.get_ActivationTraits(); trackBy:trackByIndex;"
            [ngbPopover]="'(This trait was derived from the spell components.)\n\n' + get_Traits(trait)[0].desc">
            + {{trait}}
        </cite>
        <app-tags [creature]="'Character'" [objectName]="spell.name" [showTraits]=true [showFeats]=true [showItems]=true
            [showActivities]=true [showConditions]=true [showEffects]=true [specialNames]="[source]"></app-tags>
    </div>
    <app-spellContent class="vlist fullwidth" [spell]="spell" [spellLevel]="spellLevel" [casting]="casting">
    </app-spellContent>
    <div class="newrow left-aligned" *ngFor="let feat of get_FeatsShowingOn(spell.name); trackBy:trackByIndex;">
        <header class="spellHeader">{{feat.name}}</header>
        <div class="newrow left-aligned" *ngIf="feat.traits.lenght">
            <cite class="trait" [ngClass]="{'trait-rare': trait == 'Rare', 'trait-uncommon': trait == 'Uncommon'}" *ngFor="let trait of feat.traits; trackBy:trackByIndex;"
                [ngbPopover]="get_Traits(trait)[0].desc">
                {{trait}}
            </cite>
        </div>
        <div class="newrow left-aligned" *ngFor="let desc of feat.desc.split('\n\n'); trackBy:trackByIndex;">
            <app-description class="newrow" [text]="desc"></app-description>
        </div>
    </div>
</div>