<button class="minimizebutton lower" (click)="minimize()" *ngIf="creature=='Character'">&#8691;</button>
<div id="{{creature}}-activities-height" class="attributeBox">
    <h3 class="box-header">Actions and Activities</h3>
    <div class="loading" *ngIf="still_loading()">Loading</div>
    <ng-container *ngIf="!still_loading()">
        <app-tags [creature]="creature" [objectName]="'Activities'" [showTraits]=true [showFeats]=true [showItems]=true
            [showActivities]=true [showConditions]=true [showEffects]=true></app-tags>
        <ng-container *ngFor="let skill of get_ClassDCs(); let index = index; trackBy:trackByIndex;">
            <h5 class="fullsize-only" *ngIf="index == 0">Class DCs</h5>
            <app-skill [skill]=skill [isDC]=true></app-skill>
        </ng-container>
        <h5>Actions and Activities</h5>
        <ng-container *ngFor="let gain of get_OwnedActivities(); trackBy:trackByIndex;">
            <ng-container
                *ngFor="let activity of (gain.can_Activate ? [gain] : get_Activities(gain.name)); trackBy:trackByIndex;">
                <ng-container *ngFor="let maxCharges of [activity.maxCharges(get_Creature(), characterService)]">
                    <div class="list-item" *ngFor="let activityID of [get_ID()]; trackBy:trackByIndex;">
                        <button class="row left-aligned sublist-toggle"
                            [ngClass]="{'fancy-button':gain.active, 'inactive-button':((gain.activeCooldown ? (maxCharges == gain.chargesUsed) : false) && !gain.active)}"
                            (click)="toggle_Action(activityID)">
                            <span *ngIf="activity.name == 'Fused Stance'">{{get_FuseStanceName()}}</span>
                            <span *ngIf="activity.name != 'Fused Stance'">{{activity.name}}</span>
                            <app-actionIcons [actionString]="activity.actions"></app-actionIcons>
                            {{(activity.activationType) ? activity.activationType : ""}}
                        </button>
                        <div class="list-item sublist lower"
                            [ngClass]="{'fancy-list':gain.active, 'inactive-list':((gain.activeCooldown ? (maxCharges == gain.chargesUsed) : false) && !gain.active)}"
                            *ngIf="get_showAction()==activityID">
                            <app-activity [creature]="creature" [activity]=activity [gain]=gain [allowActivate]="true">
                            </app-activity>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </ng-container>
        <ng-container *ngFor="let choice of get_TemporaryFeatChoices(); let index = index; trackBy:trackByIndex;">
            <h3 class="box-header" *ngIf="index == 0">Temporary Feats</h3>
            <app-featchoice (showChoiceMessage)="receive_ChoiceMessage($event)"
                (showFeatMessage)="receive_FeatMessage($event)" [choice]="choice" [levelNumber]="get_Creature().level"
                [showFeat]="get_showItem()" [showChoice]="get_showList()">
            </app-featchoice>
        </ng-container>
    </ng-container>
</div>
<div *ngIf="set_Span()"></div>