<h3 *ngIf="propertyData.priority == 0 && propertyData.group">{{propertyData.group.split("-")[1]}}</h3>
<div class="row list-item">
    <ng-container *ngIf="!noTitle">
        <div class="row left-aligned">
            <strong title="{{propertyData.desc}}">{{propertyData.name}}</strong>
        </div>
    </ng-container>
    <ng-container *ngIf="get_IsObject(get_Parent()[propertyKey]) && get_Parent()[propertyKey]!=null">
        <span class="row"><button (click)="add_NewItemObject()">Add ({{get_Duration()}})</button></span>
        <span class="row"><button class="row" (click)="update_Effects()" *ngIf="get_Parent()[propertyKey].length">Apply all</button></span>
        <div class="list-item row" *ngFor="let object of get_Parent()[propertyKey]; let i = index; trackBy:trackByIndex;">
            <div class="row">
                <span>{{i+1}} (Duration: {{get_Duration(get_Parent()[propertyKey][i].duration)}})</span>
                <span>
                    <button (click)="remove_NewItemObject(i)">Remove</button>
                </span>
            </div>
            <div class="row">
                <ng-container *ngIf="get_IsObject(object)">
                    <ng-container *ngFor="let subProperty of get_NewItemSubProperties(object)|sortBy:'asc':'priority'|sortBy:'asc':'group'; trackBy:trackByIndex;">
                        <app-customEffectProperty class="row" [propertyData]=subProperty [propertyKey]=subProperty.key [parents]=parents.concat(propertyKey,i) [creature]=creature></app-customEffectProperty>
                    </ng-container>
                </ng-container>
                <ng-container *ngIf="!get_IsObject(object)">
                    <app-customEffectProperty class="row" [propertyData]=propertyData [propertyKey]=i [parents]=parents.concat(propertyKey) [noTitle]=true [creature]=creature></app-customEffectProperty>
                </ng-container>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="!get_IsObject(get_Parent()[propertyKey]) || get_Parent()[propertyKey]==null">
        <div class="row">
            <input class="row" type="text" [(ngModel)]="get_Parent()[propertyKey]" (blur)="validate()" *ngIf="!propertyData.type && !propertyData.locked">
            <textarea class="row" rows=3 [(ngModel)]="get_Parent()[propertyKey]" *ngIf="propertyData.type=='textarea'"></textarea>
            <input type="checkbox" [(ngModel)]="get_Parent()[propertyKey]" *ngIf="propertyData.type=='checkbox'">
            <input type="number" [(ngModel)]="get_Parent()[propertyKey]" (blur)="validate()" (keypress)="numbersOnly($event)" *ngIf="propertyData.type=='number'">
        </div>
        <div class="row" *ngIf="validationError.length">
            <span class="problem">{{validationError}}</span>
        </div>
        <div class="row" *ngIf="validationResult.length">
            <span>Current result: {{validationResult}}</span>
        </div>
        <div class="list-item" style="margin: initial 0" *ngIf="propertyData.type!='textarea' && propertyData.type!='checkbox'">
            <select class="row" [(ngModel)]="get_Parent()[propertyKey]" [disabled]="!get_Examples().length" (ngModelChange)="validate()">
                <option *ngFor="let example of get_Examples()|sortBy:'asc'; trackBy:trackByIndex;" [ngValue]="example">
                    {{example}}
                </option>
            </select>
        </div>
    </ng-container>
</div>