<button class="minimizebutton lower" (click)="minimize()">&#8691;</button>
<div id="spellbook-height" class="attributeBox">
    <h3 class="box-header">Spells</h3>
    <div class="loading" *ngIf="still_loading()">Loading</div>
    <ng-container *ngIf="!still_loading()">
        <button class="fullsize-only list-item" (click)="toggleSpellsMenu()">Get
            Spells</button>
        <h5>Focus Spells</h5>
        <div class="list-item" [className]="(get_FocusPoints() > get_MaxFocusPoints()) ? 'problem' : ''">
            <strong>Focus Points</strong>
            <input type="number" class="number2" [ngModel]="get_FocusPoints()" disabled>
            <strong>Focus Pool</strong>
            <input type="number" class="number2" [ngModel]="get_MaxFocusPoints()" disabled>
            <button class="row center-aligned" (click)="refocus()"
                [disabled]="get_FocusPoints() >= get_MaxFocusPoints()">
                Refocus
            </button>
            <app-tags [objectName]="'Focus'" [showTraits]=true [showFeats]=true [showItems]=true [showActivities]=true
                [showConditions]=true [showEffects]=true></app-tags>
        </div>
        <ng-container *ngFor="let spellGain of get_FocusSpells()">
            <ng-container *ngFor="let spell of get_Spells(spellGain.name)">
                <div class="list-item" *ngFor="let spellID of [get_ID()]">
                    <button class="row sublist-toggle center-aligned"
                        (click)="toggle_Spell(spellID)">
                        <span>{{spell.name}}</span>
                        <span>{{spell.get_Actions()}} {{spell.castType}}</span>
                    </button>
                    <div class="list-item sublist lower"
                        *ngIf="this.get_showSpell()==spellID">
                        <button class="row center-aligned"
                            (click)="on_Cast(spellGain, spell, true)" *ngIf="spell.can_Cast(characterService, spellGain) && !spellGain.active">
                            Cast
                        </button>
                        <button class="row center-aligned"
                            (click)="on_Cast(spellGain, spell, false)" *ngIf="spell.can_Cast(characterService, spellGain) && spellGain.active">
                            Stop sustaining
                        </button>
                        <app-spell [spell]=spell></app-spell>
                    </div>
                </div>
            </ng-container>
        </ng-container>
    </ng-container>
</div>
<div *ngIf="set_Span()"></div>