<button class="minimizebutton lower" [ngStyle]="{'background-color':get_Accent()}" (click)="minimize()">&#8691;</button>
<div>   
    <h3 class="fullsize-only">Active Conditions</h3>
    <ng-container *ngFor="let conditionGain of get_AppliedConditions(true)">
        <div class="list-item" *ngFor="let condition of [get_Conditions(conditionGain.name)[0]]">
            <div class="row">
                <span><strong [className]="condition.buff ? 'bonus' : 'penalty'"
                        title="{{conditionGain.source}}">{{conditionGain.name}}
                        {{(conditionGain.value) ? conditionGain.value : ""}}</strong> ({{conditionGain.source}})</span>
            </div>
            <div class="row fullsize-only">
                <span>{{get_Duration(conditionGain.duration)}}</span>
            </div>
            <div class="row fullsize-only">
                <div class="list-item lower row problem" *ngIf="condition.inputRequired">
                    <strong>Player input required:</strong>
                    <p *ngFor="let inputRequired of condition.inputRequired.split('\n')">
                        {{inputRequired}}
                    </p>
                </div>
                <div class="row">
                    <button [ngStyle]="{'background-color':get_Accent()}" (click)="remove_Condition(conditionGain)">
                        Remove
                    </button>
                    <button [ngStyle]="{'background-color':get_Accent()}"
                        (click)="toggle_Item(conditionGain.name+conditionGain.source+conditionGain.value+conditionGain.duration+'applied')">
                        Show Description
                    </button>
                </div>
                <div class="row"
                    *ngIf="this.get_ShowItem()==conditionGain.name+conditionGain.source+conditionGain.value+conditionGain.duration+'applied'">
                    <div *ngFor="let desc of condition.desc.split('\n\n')">
                        <p *ngIf="desc.split('\n').length == 1">{{desc}}</p>
                        <ul *ngIf="desc.split('\n').length > 1">
                            <li *ngFor="let line of desc.split('\n')">{{line}}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
    <h3 class="fullsize-only">Active Effects</h3>
    <div class="row lower">
        <div class="list-item" *ngFor="let effect of get_AppliedEffects()">
            <span><strong [className]="effect.penalty ? 'penalty' : 'bonus'" title="{{effect.source}}">{{effect.target}}
                    {{effect.value}}</strong> {{effect.type}} {{(effect.penalty) ? 'penalty' : 'bonus'}}
                ({{effect.source}})</span>
        </div>
    </div>
</div>
<button class="list-item fullsize-only" [ngStyle]="{'background-color':get_Accent()}"
    (click)="toggle_NotApplied()">{{(showNotApplied) ? "Hide not applied" : "Show not applied"}}</button>
<div class="fullsize-only" *ngIf="showNotApplied">
    <h3>Not Applied Conditions</h3>
    <div class="list-item notapplied" *ngFor="let conditionGain of get_AppliedConditions(false)">
        <span><strong [className]="conditionGain.buff ? 'bonus' : 'penalty'"
                title="{{conditionGain.source}}">{{conditionGain.name}}
                {{(conditionGain.value) ? conditionGain.value : ""}}</strong>
            {{(conditionGain.duration != -1) ? conditionGain.duration / 10 + " turns" : "permanent"}}
            ({{conditionGain.source}})</span>
        <ng-container *ngFor="let condition of [get_Conditions(conditionGain.name)[0]]">
            <div class="row">
                <button class="button" [ngStyle]="{'background-color':get_Accent()}"
                    (click)="toggle_Item(conditionGain.name+conditionGain.source+conditionGain.value+conditionGain.duration+'notapplied')">
                    Show Description
                </button>
                <button class="button" [ngStyle]="{'background-color':get_Accent()}"
                    (click)="remove_Condition(conditionGain)">
                    Remove
                </button>
            </div>
            <div class="row"
                *ngIf="this.get_ShowItem()==conditionGain.name+conditionGain.source+conditionGain.value+conditionGain.duration+'notapplied'">
                <p *ngFor="let desc of condition.desc.split('\n')">
                    {{desc}}
                </p>
            </div>
        </ng-container>
    </div>
    <h3>Not Applied Effects</h3>
    <div class="row lower">
        <div class="list-item notapplied" *ngFor="let effect of get_NotAppliedEffects()">
            <span><strong [className]="effect.penalty ? 'penalty' : 'bonus'" title="{{effect.source}}">{{effect.target}}
                    {{effect.value}}</strong> {{effect.type}} {{(effect.penalty) ? 'penalty' : 'bonus'}}
                ({{effect.source}})</span>
        </div>
    </div>
</div>
<button class="list-item fullsize-only" [ngStyle]="{'background-color':get_Accent()}"
    (click)="toggle_Hidden()">{{(showHidden) ? "Hide feat effects" : "Show feat effects"}}</button>
<div class="fullsize-only" *ngIf="showHidden">
    <h3>Feat Effects</h3>
    <div class="row lower">
        <div class="list-item notapplied" *ngFor="let effect of get_HiddenEffects()">
            <span><strong [className]="effect.penalty ? 'penalty' : 'bonus'" title="{{effect.source}}">{{effect.target}}
                    {{effect.value}}</strong> {{effect.type}} {{(effect.penalty) ? 'penalty' : 'bonus'}}
                ({{effect.source}})</span>
        </div>
    </div>
</div>