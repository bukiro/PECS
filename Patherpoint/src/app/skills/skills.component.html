<div id="skills" class="attributeBox">
    <div class="loading" *ngIf="still_loading()">Loading</div>
    <div *ngIf="!still_loading()">
        <h3>Perception</h3>
        <div class="list-item" *ngFor="let skill of get_Skills('', 'perception')">
            <strong>{{skill.name}}</strong>
            <app-proficiency-form [skill]="skill" [characterService]="this.characterService"></app-proficiency-form>
            Value: <input class="number" [className]="(skill.penalty(this.effectsService) < 0) ? 'penalty' : (skill.bonus(this.effectsService) > 0) ? 'bonus' : ''" type="number" value="{{skill.value(this.characterService,this.abilitiesService,this.effectsService)}}" disabled>
            <div class="row" *ngIf="get_TraitsForThis(skill.name).length">
            <cite *ngFor="let trait of get_TraitsForThis(skill.name)" title="{{trait.description}}">&nbsp;{{trait.name}} ({{trait.haveOn(this.characterService, true)}})</cite>
            </div>
            <div class="row" *ngIf="skill.effects(this.effectsService).length">
                <cite *ngFor="let effect of skill.effects(this.effectsService)" [className]="effect.penalty ? 'penalty' : 'bonus'">{{effect.value}} ({{effect.source}})&nbsp;</cite>
            </div>
            <div class="row">
                <input type="checkbox" [(ngModel)]="skill.showNotes">Notes
            </div>
            <div class="row">
                <input type="textarea" class="fullwidth" [(ngModel)]="skill.notes" *ngIf="skill.showNotes">
            </div>
        </div>
        <h3>Skills</h3>
        <div class="list-item" *ngFor="let skill of get_Skills('', 'skill')|sortBy:'asc':'name'">
            <strong>{{skill.name}}</strong>
            <app-proficiency-form [skill]="skill" [characterService]="this.characterService"></app-proficiency-form>
            Value: <input class="number" [className]="(skill.penalty(this.effectsService) < 0) ? 'penalty' : (skill.bonus(this.effectsService) > 0) ? 'bonus' : ''" type="number" value="{{skill.value(this.characterService,this.abilitiesService,this.effectsService)}}" disabled>
            <div class="row" *ngIf="get_TraitsForThis(skill.name).length">
            <cite *ngFor="let trait of get_TraitsForThis(skill.name)" title="{{trait.description}}">&nbsp;{{trait.name}} ({{trait.haveOn(this.characterService, true)}})</cite>
            </div>
            <div class="row" *ngIf="skill.effects(this.effectsService).length">
                <cite *ngFor="let effect of skill.effects(this.effectsService)" [className]="effect.penalty ? 'penalty' : 'bonus'">{{effect.value}} ({{effect.source}})&nbsp;</cite>
            </div>
            <div class="row">
                <input type="checkbox" [(ngModel)]="skill.showNotes">Notes
            </div>
            <div class="row">
                <input type="textarea" class="fullwidth" [(ngModel)]="skill.notes" *ngIf="skill.showNotes">
            </div>
        </div>
    </div>
</div>